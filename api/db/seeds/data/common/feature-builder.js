import { CAMPAIGN_FEATURES, ORGANIZATION_FEATURE } from '../../../../src/shared/domain/constants.js';
import {
  FEATURE_ATTESTATIONS_MANAGEMENT_ID,
  FEATURE_CAMPAIGN_EXTERNAL_ID,
  FEATURE_CAMPAIGN_WITHOUT_USER_PROFILE_ID,
  FEATURE_COMPUTE_ORGANIZATION_LEARNER_CERTIFICABILITY_ID,
  FEATURE_COVER_RATE_ID,
  FEATURE_LEARNER_IMPORT_ID,
  FEATURE_MISSIONS_MANAGEMENT_ID,
  FEATURE_MULTIPLE_SENDING_ASSESSMENT_ID,
  FEATURE_ORALIZATION_ID,
  FEATURE_PLACES_MANAGEMENT_ID,
} from './constants.js';

const featuresBuilder = async function ({ databaseBuilder }) {
  databaseBuilder.factory.buildFeature({
    id: FEATURE_CAMPAIGN_WITHOUT_USER_PROFILE_ID,
    key: ORGANIZATION_FEATURE.CAMPAIGN_WITHOUT_USER_PROFILE.key,
    description: ORGANIZATION_FEATURE.CAMPAIGN_WITHOUT_USER_PROFILE.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_MULTIPLE_SENDING_ASSESSMENT_ID,
    key: ORGANIZATION_FEATURE.MULTIPLE_SENDING_ASSESSMENT.key,
    description: ORGANIZATION_FEATURE.MULTIPLE_SENDING_ASSESSMENT.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_COMPUTE_ORGANIZATION_LEARNER_CERTIFICABILITY_ID,
    key: ORGANIZATION_FEATURE.COMPUTE_ORGANIZATION_LEARNER_CERTIFICABILITY.key,
    description: ORGANIZATION_FEATURE.COMPUTE_ORGANIZATION_LEARNER_CERTIFICABILITY.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_PLACES_MANAGEMENT_ID,
    key: ORGANIZATION_FEATURE.PLACES_MANAGEMENT.key,
    description: ORGANIZATION_FEATURE.PLACES_MANAGEMENT.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_ATTESTATIONS_MANAGEMENT_ID,
    key: ORGANIZATION_FEATURE.ATTESTATIONS_MANAGEMENT.key,
    description: ORGANIZATION_FEATURE.ATTESTATIONS_MANAGEMENT.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_MISSIONS_MANAGEMENT_ID,
    key: ORGANIZATION_FEATURE.MISSIONS_MANAGEMENT.key,
    description: ORGANIZATION_FEATURE.MISSIONS_MANAGEMENT.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_LEARNER_IMPORT_ID,
    key: ORGANIZATION_FEATURE.LEARNER_IMPORT.key,
    description: ORGANIZATION_FEATURE.LEARNER_IMPORT.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_CAMPAIGN_EXTERNAL_ID,
    key: CAMPAIGN_FEATURES.EXTERNAL_ID.key,
    description: CAMPAIGN_FEATURES.EXTERNAL_ID.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_ORALIZATION_ID,
    key: ORGANIZATION_FEATURE.ORALIZATION_MANAGED_BY_PRESCRIBER.key,
    description: ORGANIZATION_FEATURE.ORALIZATION_MANAGED_BY_PRESCRIBER.description,
  });
  databaseBuilder.factory.buildFeature({
    id: FEATURE_COVER_RATE_ID,
    key: ORGANIZATION_FEATURE.COVER_RATE.key,
    description: ORGANIZATION_FEATURE.COVER_RATE.description,
  });
  await databaseBuilder.commit();
};

export { featuresBuilder };
